# โ ุชุญุณููุงุช ุงููููุฏ ูู ููุงุณุจุงุช ูุนุฑูุถ ุงูููุฑู

## ๐ **ุงููุดุงูู ุงูุชู ุชู ุญููุง**

### **1. ููุงุณุจุงุช ุงูููุฑู (Hero Occasions)**

- โ **ูุง ุชูุฌุฏ ูููุฏ ุนูู ุงูุฃุณูุงุก ุงูููุฑุฑุฉ** ูู ุงูุฅุถุงูุฉ ุฃู ุงูุชุนุฏูู
- โ **ูุง ุชูุฌุฏ ููุงุฑุณ ูุฑูุฏุฉ** ููุฃุณูุงุก ูู ุงููููุฐุฌ
- โ **ููุฌูุฏ ุชุญูู ูู ุงูุชูุงุฑูุฎ ุงููุชุฏุงุฎูุฉ** (ูุงู ุฌูุฏ)

### **2. ุนุฑูุถ ุงูููุฑู (Hero Promotions)**

- โ **ูุง ุชูุฌุฏ ูููุฏ ุนูู ุงูุนูุงููู ุงูููุฑุฑุฉ** ูู ุงูุฅุถุงูุฉ ุฃู ุงูุชุนุฏูู
- โ **ูุง ุชูุฌุฏ ูููุฏ ุนูู ุงูุฃููููุฉ ุงูููุฑุฑุฉ** (priority)
- โ **ูุง ุชูุฌุฏ ููุงุฑุณ ูุฑูุฏุฉ** ููุนูุงููู ูุงูุฃููููุฉ ูู ุงููููุฐุฌ

## ๐๏ธ **ุงูุชุญุณููุงุช ุงููุทุจูุฉ**

### **1. ุฅุถุงูุฉ ููุงุฑุณ ูุฑูุฏุฉ ูู ุงูููุงุฐุฌ**

#### **ููุงุณุจุงุช ุงูููุฑู:**

```javascript
// ุฅุถุงูุฉ ููุงุฑุณ ูุฑูุฏุฉ ููุฃุณูุงุก
heroOccasionSchema.index({ nameAr: 1 }, { unique: true, sparse: true });
heroOccasionSchema.index({ nameEn: 1 }, { unique: true, sparse: true });
```

#### **ุนุฑูุถ ุงูููุฑู:**

```javascript
// ุฅุถุงูุฉ ููุงุฑุณ ูุฑูุฏุฉ ููุนูุงููู ูุงูุฃููููุฉ
heroPromotionSchema.index({ titleAr: 1 }, { unique: true, sparse: true });
heroPromotionSchema.index({ titleEn: 1 }, { unique: true, sparse: true });
heroPromotionSchema.index({ priority: 1 }, { unique: true, sparse: true });
```

### **2. ุชุญุณูู ุฏุงูุฉ createOccasion (ููุงุณุจุงุช ุงูููุฑู)**

```javascript
// ุงูุชุญูู ูู ุนุฏู ูุฌูุฏ ููุงุณุจุฉ ุจููุณ ุงูุงุณู
const existingOccasion = await HeroOccasion.findOne({
  $or: [
    { nameAr: { $regex: new RegExp(`^${nameAr}$`, "i") } },
    { nameEn: { $regex: new RegExp(`^${nameEn}$`, "i") } },
  ],
});

if (existingOccasion) {
  return res.status(409).json({
    success: false,
    message: "ููุฌุฏ ููุงุณุจุฉ ุจููุณ ุงูุงุณู ุจุงููุนู",
  });
}
```

### **3. ุชุญุณูู ุฏุงูุฉ updateOccasion (ููุงุณุจุงุช ุงูููุฑู)**

```javascript
// ุงูุชุญูู ูู ุนุฏู ูุฌูุฏ ููุงุณุจุฉ ุฃุฎุฑู ุจููุณ ุงูุงุณู (ุฅุฐุง ุชู ุชุบููุฑ ุงูุงุณู)
if (updateData.nameAr || updateData.nameEn) {
  const nameAr = updateData.nameAr || currentOccasion.nameAr;
  const nameEn = updateData.nameEn || currentOccasion.nameEn;

  const duplicateOccasion = await HeroOccasion.findOne({
    _id: { $ne: id }, // ุงุณุชุจุนุงุฏ ุงูููุงุณุจุฉ ุงูุญุงููุฉ
    $or: [
      { nameAr: { $regex: new RegExp(`^${nameAr}$`, "i") } },
      { nameEn: { $regex: new RegExp(`^${nameEn}$`, "i") } },
    ],
  });

  if (duplicateOccasion) {
    return res.status(409).json({
      success: false,
      message: "ููุฌุฏ ููุงุณุจุฉ ุฃุฎุฑู ุจููุณ ุงูุงุณู ุจุงููุนู",
    });
  }
}
```

### **4. ุชุญุณูู ุฏุงูุฉ createPromotion (ุนุฑูุถ ุงูููุฑู)**

```javascript
// ุงูุชุญูู ูู ุนุฏู ูุฌูุฏ ุนุฑุถ ุจููุณ ุงูุนููุงู ุฃู ุงูุฃููููุฉ
const existingPromotion = await HeroPromotion.findOne({
  $or: [
    { titleAr: { $regex: new RegExp(`^${titleAr}$`, "i") } },
    { titleEn: { $regex: new RegExp(`^${titleEn}$`, "i") } },
    { priority: parseInt(priority) },
  ],
});

if (existingPromotion) {
  let conflictField = "";
  if (existingPromotion.titleAr === titleAr) conflictField = "ุงูุนููุงู ุงูุนุฑุจู";
  else if (existingPromotion.titleEn === titleEn)
    conflictField = "ุงูุนููุงู ุงูุฅูุฌููุฒู";
  else if (existingPromotion.priority === parseInt(priority))
    conflictField = "ุงูุฃููููุฉ";

  return res.status(409).json({
    success: false,
    message: `ููุฌุฏ ุนุฑุถ ุชุฑููุฌู ุจููุณ ${conflictField} ุจุงููุนู`,
  });
}
```

### **5. ุชุญุณูู ุฏุงูุฉ updatePromotion (ุนุฑูุถ ุงูููุฑู)**

```javascript
// ุงูุชุญูู ูู ุนุฏู ูุฌูุฏ ุนุฑุถ ุขุฎุฑ ุจููุณ ุงูุนููุงู ุฃู ุงูุฃููููุฉ (ุฅุฐุง ุชู ุชุบููุฑูุง)
if (updateData.titleAr || updateData.titleEn || updateData.priority) {
  const titleAr = updateData.titleAr || currentPromotion.titleAr;
  const titleEn = updateData.titleEn || currentPromotion.titleEn;
  const priority = updateData.priority
    ? parseInt(updateData.priority)
    : currentPromotion.priority;

  const duplicatePromotion = await HeroPromotion.findOne({
    _id: { $ne: id }, // ุงุณุชุจุนุงุฏ ุงูุนุฑุถ ุงูุญุงูู
    $or: [
      { titleAr: { $regex: new RegExp(`^${titleAr}$`, "i") } },
      { titleEn: { $regex: new RegExp(`^${titleEn}$`, "i") } },
      { priority: priority },
    ],
  });

  if (duplicatePromotion) {
    let conflictField = "";
    if (duplicatePromotion.titleAr === titleAr)
      conflictField = "ุงูุนููุงู ุงูุนุฑุจู";
    else if (duplicatePromotion.titleEn === titleEn)
      conflictField = "ุงูุนููุงู ุงูุฅูุฌููุฒู";
    else if (duplicatePromotion.priority === priority)
      conflictField = "ุงูุฃููููุฉ";

    return res.status(409).json({
      success: false,
      message: `ููุฌุฏ ุนุฑุถ ุชุฑููุฌู ุขุฎุฑ ุจููุณ ${conflictField} ุจุงููุนู`,
    });
  }
}
```

## ๐ **ุงููููุฏ ุงููุทุจูุฉ ุญุงููุงู**

### **ููุงุณุจุงุช ุงูููุฑู (Hero Occasions)**

- โ **ุงูุงุณู ุงูุนุฑุจู:** ูุทููุจุ ูุฑูุฏ
- โ **ุงูุงุณู ุงูุฅูุฌููุฒู:** ูุทููุจุ ูุฑูุฏ
- โ **ุชุงุฑูุฎ ุงูุจุฏุงูุฉ:** ูุทููุจุ ุตุญูุญ
- โ **ุชุงุฑูุฎ ุงูููุงูุฉ:** ูุทููุจุ ุจุนุฏ ุฃู ูุณุงูู ุชุงุฑูุฎ ุงูุจุฏุงูุฉ
- โ **ุงูุตูุฑ:** ูุทููุจุฉุ ุนูู ุงูุฃูู ุตูุฑุฉ ูุงุญุฏุฉ
- โ **ุฑุณุงูุฉ ุงูุชููุฆุฉ ุงูุนุฑุจูุฉ:** ูุทููุจุฉ
- โ **ุฑุณุงูุฉ ุงูุชููุฆุฉ ุงูุฅูุฌููุฒูุฉ:** ูุทููุจุฉ
- โ **ุงูุชูุงุฑูุฎ ุงููุชุฏุงุฎูุฉ:** ูุฑููุถุฉ

### **ุนุฑูุถ ุงูููุฑู (Hero Promotions)**

- โ **ุงูุนููุงู ุงูุนุฑุจู:** ูุทููุจุ ูุฑูุฏ
- โ **ุงูุนููุงู ุงูุฅูุฌููุฒู:** ูุทููุจุ ูุฑูุฏ
- โ **ุงูุนููุงู ุงููุฑุนู ุงูุนุฑุจู:** ูุทููุจุ 5-200 ุญุฑู
- โ **ุงูุนููุงู ุงููุฑุนู ุงูุฅูุฌููุฒู:** ูุทููุจุ 5-200 ุญุฑู
- โ **ูุต ุงูุฒุฑ ุงูุนุฑุจู:** ูุทููุจุ 2-50 ุญุฑู
- โ **ูุต ุงูุฒุฑ ุงูุฅูุฌููุฒู:** ูุทููุจุ 2-50 ุญุฑู
- โ **ุงูุฑุงุจุท:** ูุทููุจุ ุฑุงุจุท ุตุญูุญ
- โ **ุงูุตูุฑุฉ:** ูุทููุจุฉุ ุฑุงุจุท ุตุญูุญ
- โ **ุงูุฃููููุฉ:** ูุทููุจุฉุ 1-100ุ ูุฑูุฏุฉ
- โ **ุชุงุฑูุฎ ุงูุจุฏุงูุฉ:** ูุทููุจุ ุตุญูุญ
- โ **ุชุงุฑูุฎ ุงูููุงูุฉ:** ูุทููุจุ ุจุนุฏ ุฃู ูุณุงูู ุชุงุฑูุฎ ุงูุจุฏุงูุฉ

## ๐งช **ุงูุงุฎุชุจุงุฑุงุช ุงููุทุจูุฉ**

### **ุงุฎุชุจุงุฑ ุงูุฃุณูุงุก/ุงูุนูุงููู ุงูููุฑุฑุฉ**

- โ **ุฅุถุงูุฉ ููุงุณุจุฉ/ุนุฑุถ ุจููุณ ุงูุงุณู/ุงูุนููุงู:** ูุฑููุถ
- โ **ุฅุถุงูุฉ ุนุฑุถ ุจููุณ ุงูุฃููููุฉ:** ูุฑููุถ
- โ **ุชุนุฏูู ููุงุณุจุฉ/ุนุฑุถ ุจููุณ ุงูุงุณู/ุงูุนููุงู:** ูุฑููุถ
- โ **ุชุนุฏูู ููุงุณุจุฉ/ุนุฑุถ ุจููุณ ุงูุงุณู/ุงูุนููุงู ุงูุญุงูู:** ูุณููุญ
- โ **ุชุนุฏูู ููุงุณุจุฉ/ุนุฑุถ ุจุงุณู/ุนููุงู ูุฎุชูู:** ูุณููุญ

### **ุงุฎุชุจุงุฑ ุงููููุฏ ุงูุฃุฎุฑู**

- โ **ุงูุชูุงุฑูุฎ ุงููุชุฏุงุฎูุฉ:** ูุฑููุถุฉ
- โ **ุทูู ุงููุตูุต:** ุญุณุจ ุงููููุฏ ุงููุญุฏุฏุฉ
- โ **ุตุญุฉ ุงูุฑูุงุจุท:** ุชูุณูู ุตุญูุญ
- โ **ุงูุฃููููุฉ:** ุฑูู ุตุญูุญ ุจูู 1-100

## ๐ฏ **ุงููุชุงุฆุฌ**

### **ูุจู ุงูุชุญุณููุงุช**

- โ ูููู ุฅุถุงูุฉ ููุงุณุจุงุช/ุนุฑูุถ ุจุฃุณูุงุก/ุนูุงููู ููุฑุฑุฉ
- โ ูููู ุชุนุฏูู ููุงุณุจุงุช/ุนุฑูุถ ูุชุญูู ููุณ ุฃุณูุงุก/ุนูุงููู ุฃุฎุฑู
- โ ูุง ุชูุฌุฏ ูููุฏ ุนูู ุงูุฃููููุฉ ุงูููุฑุฑุฉ
- โ ูุง ุชูุฌุฏ ูููุฏ ุนูู ูุณุชูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### **ุจุนุฏ ุงูุชุญุณููุงุช**

- โ **ููุน ุงูุฃุณูุงุก/ุงูุนูุงููู ุงูููุฑุฑุฉ** ูู ุงูุฅุถุงูุฉ ูุงูุชุนุฏูู
- โ **ููุน ุงูุฃููููุฉ ุงูููุฑุฑุฉ** ูู ุงูุนุฑูุถ
- โ **ูููุฏ ุนูู ูุณุชูู ูุงุนุฏุฉ ุงูุจูุงูุงุช** ูุน ููุงุฑุณ ูุฑูุฏุฉ
- โ **ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ** ูููุณุชุฎุฏู
- โ **ุญูุงูุฉ ูู ุงูุชูุงุนุจ** ูู ุงูุจูุงูุงุช

## ๐ **ููุงุญุธุงุช ูููุฉ**

- **ุงููููุฏ ูุทุจูุฉ ุนูู ูุณุชูู ุงูุชุทุจูู ููุงุนุฏุฉ ุงูุจูุงูุงุช**
- **ุฑุณุงุฆู ุงูุฎุทุฃ ูุงุถุญุฉ ููููุฏุฉ ูููุณุชุฎุฏู**
- **ุงูุฃุฏุงุก ูุญุณู** ูุน ุงูููุงุฑุณ ุงูููุงุณุจุฉ
- **ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ ูุญููุฉ** ูู ุงูุชูู
- **ุงูุชูุงุฑูุฎ ุงููุชุฏุงุฎูุฉ ูุญุธูุฑุฉ** ูููุน ุงูุชุนุงุฑุถ

---

**ุชุงุฑูุฎ ุงูุชุญุณูู:** $(Get-Date -Format "yyyy-MM-dd HH:mm:ss")
**ุงูุญุงูุฉ:** โ ููุชูู ููุฎุชุจุฑ
