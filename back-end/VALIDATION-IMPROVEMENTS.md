# โ ุชุญุณููุงุช ุงููููุฏ ูุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช

## ๐ **ุงููุดุงูู ุงูุชู ุชู ุญููุง**

### **1. ูุดููุฉ ุงูุฃุณูุงุก ุงูููุฑุฑุฉ ูู ุงูุชุนุฏูู**

- **ุงููุดููุฉ:** ูุงู ูููู ุชุนุฏูู ููุงุณุจุฉ ุฃู ูุฆุฉ ูุชุญูู ููุณ ุงุณู ููุงุณุจุฉ ุฃู ูุฆุฉ ุฃุฎุฑู
- **ุงูุณุจุจ:** ุนุฏู ูุฌูุฏ ุชุญูู ูู ุงูุฃุณูุงุก ุงูููุฑุฑุฉ ูู ุฏุงูุชู `updateOccasion` ู `updateCategory`
- **ุงูุญู:** ุฅุถุงูุฉ ุชุญูู ูู ุงูุฃุณูุงุก ุงูููุฑุฑุฉ ูุน ุงุณุชุจุนุงุฏ ุงูุนูุตุฑ ุงูุญุงูู

### **2. ุนุฏู ูุฌูุฏ ููุงุฑุณ ูุฑูุฏุฉ ููุฃุณูุงุก**

- **ุงููุดููุฉ:** ูู ุชูู ููุงู ูููุฏ ุนูู ูุณุชูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูููุน ุงูุฃุณูุงุก ุงูููุฑุฑุฉ
- **ุงูุณุจุจ:** ุนุฏู ูุฌูุฏ unique indexes ููุฃุณูุงุก ูู ุงูููุงุฐุฌ
- **ุงูุญู:** ุฅุถุงูุฉ ููุงุฑุณ ูุฑูุฏุฉ ููุฃุณูุงุก ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ

## ๐๏ธ **ุงูุชุญุณููุงุช ุงููุทุจูุฉ**

### **1. ุชุญุณูู ุฏุงูุฉ updateOccasion**

```javascript
// ุงูุชุญูู ูู ุนุฏู ูุฌูุฏ ููุงุณุจุฉ ุฃุฎุฑู ุจููุณ ุงูุงุณู (ุฅุฐุง ุชู ุชุบููุฑ ุงูุงุณู)
if (updateData.nameAr || updateData.nameEn) {
  const nameAr = updateData.nameAr || existingOccasion.nameAr;
  const nameEn = updateData.nameEn || existingOccasion.nameEn;

  const duplicateOccasion = await Occasion.findOne({
    _id: { $ne: id }, // ุงุณุชุจุนุงุฏ ุงูููุงุณุจุฉ ุงูุญุงููุฉ
    $or: [
      { nameAr: { $regex: new RegExp(`^${nameAr}$`, "i") } },
      { nameEn: { $regex: new RegExp(`^${nameEn}$`, "i") } },
    ],
  });

  if (duplicateOccasion) {
    return res.status(409).json({
      success: false,
      message: "ููุฌุฏ ููุงุณุจุฉ ุฃุฎุฑู ุจููุณ ุงูุงุณู ุจุงููุนู",
    });
  }
}
```

### **2. ุชุญุณูู ุฏุงูุฉ updateCategory**

```javascript
// ุงูุชุญูู ูู ุนุฏู ูุฌูุฏ ูุฆุฉ ุฃุฎุฑู ุจููุณ ุงูุงุณู (ุฅุฐุง ุชู ุชุบููุฑ ุงูุงุณู)
if (updateData.nameAr || updateData.nameEn) {
  const nameAr = updateData.nameAr || existingCategory.nameAr;
  const nameEn = updateData.nameEn || existingCategory.nameEn;

  const duplicateCategory = await Category.findOne({
    _id: { $ne: id }, // ุงุณุชุจุนุงุฏ ุงููุฆุฉ ุงูุญุงููุฉ
    $or: [
      { nameAr: { $regex: new RegExp(`^${nameAr}$`, "i") } },
      { nameEn: { $regex: new RegExp(`^${nameEn}$`, "i") } },
    ],
  });

  if (duplicateCategory) {
    return res.status(409).json({
      success: false,
      message: "ููุฌุฏ ูุฆุฉ ุฃุฎุฑู ุจููุณ ุงูุงุณู ุจุงููุนู",
    });
  }
}
```

### **3. ุฅุถุงูุฉ ููุงุฑุณ ูุฑูุฏุฉ ูู ุงูููุงุฐุฌ**

```javascript
// ุฅุถุงูุฉ ููุงุฑุณ ูุฑูุฏุฉ ููุฃุณูุงุก
OccasionSchema.index({ nameAr: 1 }, { unique: true, sparse: true });
OccasionSchema.index({ nameEn: 1 }, { unique: true, sparse: true });

CategorySchema.index({ nameAr: 1 }, { unique: true, sparse: true });
CategorySchema.index({ nameEn: 1 }, { unique: true, sparse: true });
```

## ๐ **ุงููููุฏ ุงููุทุจูุฉ ุญุงููุงู**

### **ุงูููุงุณุจุงุช (Occasions)**

- โ **ุงูุงุณู ุงูุนุฑุจู:** ูุทููุจุ 2-100 ุญุฑูุ ูุฑูุฏ
- โ **ุงูุงุณู ุงูุฅูุฌููุฒู:** ูุทููุจุ 2-100 ุญุฑูุ ูุฑูุฏ
- โ **ุงููุตู ุงูุนุฑุจู:** ุงุฎุชูุงุฑูุ ุญุชู 500 ุญุฑู
- โ **ุงููุตู ุงูุฅูุฌููุฒู:** ุงุฎุชูุงุฑูุ ุญุชู 500 ุญุฑู
- โ **ุตูุฑุฉ ุงูููุงุณุจุฉ:** ูุทููุจุฉุ ุฑุงุจุท ุตุญูุญ
- โ **ุชุฑุชูุจ ุงูุนุฑุถ:** ุฑูู ุตุญูุญ โฅ 0
- โ **ุนููุงู SEO ุงูุนุฑุจู:** ุงุฎุชูุงุฑูุ ุญุชู 60 ุญุฑู
- โ **ุนููุงู SEO ุงูุฅูุฌููุฒู:** ุงุฎุชูุงุฑูุ ุญุชู 60 ุญุฑู
- โ **ูุตู SEO ุงูุนุฑุจู:** ุงุฎุชูุงุฑูุ ุญุชู 160 ุญุฑู
- โ **ูุตู SEO ุงูุฅูุฌููุฒู:** ุงุฎุชูุงุฑูุ ุญุชู 160 ุญุฑู

### **ุงููุฆุงุช (Categories)**

- โ **ุงูุงุณู ุงูุนุฑุจู:** ูุทููุจุ 2-100 ุญุฑูุ ูุฑูุฏ
- โ **ุงูุงุณู ุงูุฅูุฌููุฒู:** ูุทููุจุ 2-100 ุญุฑูุ ูุฑูุฏ
- โ **ุงููุตู ุงูุนุฑุจู:** ุงุฎุชูุงุฑูุ ุญุชู 500 ุญุฑู
- โ **ุงููุตู ุงูุฅูุฌููุฒู:** ุงุฎุชูุงุฑูุ ุญุชู 500 ุญุฑู
- โ **ุตูุฑุฉ ุงููุฆุฉ:** ูุทููุจุฉุ ุฑุงุจุท ุตุญูุญ
- โ **ุชุฑุชูุจ ุงูุนุฑุถ:** ุฑูู ุตุญูุญ โฅ 0
- โ **ุนููุงู SEO ุงูุนุฑุจู:** ุงุฎุชูุงุฑูุ ุญุชู 60 ุญุฑู
- โ **ุนููุงู SEO ุงูุฅูุฌููุฒู:** ุงุฎุชูุงุฑูุ ุญุชู 60 ุญุฑู
- โ **ูุตู SEO ุงูุนุฑุจู:** ุงุฎุชูุงุฑูุ ุญุชู 160 ุญุฑู
- โ **ูุตู SEO ุงูุฅูุฌููุฒู:** ุงุฎุชูุงุฑูุ ุญุชู 160 ุญุฑู

## ๐งช **ุงูุงุฎุชุจุงุฑุงุช ุงููุทุจูุฉ**

### **ุงุฎุชุจุงุฑ ุงูุฃุณูุงุก ุงูููุฑุฑุฉ**

- โ **ุฅุถุงูุฉ ููุงุณุจุฉ/ูุฆุฉ ุจููุณ ุงูุงุณู:** ูุฑููุถ
- โ **ุชุนุฏูู ููุงุณุจุฉ/ูุฆุฉ ุจููุณ ุงูุงุณู:** ูุฑููุถ
- โ **ุชุนุฏูู ููุงุณุจุฉ/ูุฆุฉ ุจููุณ ุงูุงุณู ุงูุญุงูู:** ูุณููุญ
- โ **ุชุนุฏูู ููุงุณุจุฉ/ูุฆุฉ ุจุงุณู ูุฎุชูู:** ูุณููุญ

### **ุงุฎุชุจุงุฑ ุงููููุฏ ุงูุฃุฎุฑู**

- โ **ุทูู ุงูุฃุณูุงุก:** 2-100 ุญุฑู
- โ **ุทูู ุงูุฃูุตุงู:** ุญุชู 500 ุญุฑู
- โ **ุทูู ุนูุงููู SEO:** ุญุชู 60 ุญุฑู
- โ **ุทูู ุฃูุตุงู SEO:** ุญุชู 160 ุญุฑู
- โ **ุชุฑุชูุจ ุงูุนุฑุถ:** ุฑูู ุตุญูุญ โฅ 0
- โ **ุตุญุฉ ุฑูุงุจุท ุงูุตูุฑ:** ุชูุณูู URL ุตุญูุญ

## ๐ฏ **ุงููุชุงุฆุฌ**

### **ูุจู ุงูุชุญุณููุงุช**

- โ ูููู ุชุนุฏูู ููุงุณุจุฉ ูุชุญูู ููุณ ุงุณู ููุงุณุจุฉ ุฃุฎุฑู
- โ ูููู ุชุนุฏูู ูุฆุฉ ูุชุญูู ููุณ ุงุณู ูุฆุฉ ุฃุฎุฑู
- โ ูุง ุชูุฌุฏ ูููุฏ ุนูู ูุณุชูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### **ุจุนุฏ ุงูุชุญุณููุงุช**

- โ **ููุน ุงูุฃุณูุงุก ุงูููุฑุฑุฉ** ูู ุงูุฅุถุงูุฉ ูุงูุชุนุฏูู
- โ **ูููุฏ ุนูู ูุณุชูู ูุงุนุฏุฉ ุงูุจูุงูุงุช** ูุน ููุงุฑุณ ูุฑูุฏุฉ
- โ **ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ** ูููุณุชุฎุฏู
- โ **ุญูุงูุฉ ูู ุงูุชูุงุนุจ** ูู ุงูุจูุงูุงุช

## ๐ **ููุงุญุธุงุช ูููุฉ**

- **ุงููููุฏ ูุทุจูุฉ ุนูู ูุณุชูู ุงูุชุทุจูู ููุงุนุฏุฉ ุงูุจูุงูุงุช**
- **ุฑุณุงุฆู ุงูุฎุทุฃ ูุงุถุญุฉ ููููุฏุฉ ูููุณุชุฎุฏู**
- **ุงูุฃุฏุงุก ูุญุณู** ูุน ุงูููุงุฑุณ ุงูููุงุณุจุฉ
- **ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ ูุญููุฉ** ูู ุงูุชูู

---

**ุชุงุฑูุฎ ุงูุชุญุณูู:** $(Get-Date -Format "yyyy-MM-dd HH:mm:ss")
**ุงูุญุงูุฉ:** โ ููุชูู ููุฎุชุจุฑ
